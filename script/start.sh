#!/bin/bash
echo -e "\033[48;5;235;38;2;0;191;255m           _____                _____                    _____                    _____                _____           \033[0m"; sleep 0.02 
echo -e "\033[48;5;235;38;2;0;191;255m          /\    \              /\    \                  /\    \                  /\    \              /\    \          \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m         /::\    \            /::\    \                /::\    \                /::\    \            /::\    \         \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m        /::::\    \           \:::\    \              /::::\    \              /::::\    \           \:::\    \        \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m       /::::::\    \           \:::\    \            /::::::\    \            /::::::\    \           \:::\    \       \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m      /:::/\:::\    \           \:::\    \          /:::/\:::\    \          /:::/\:::\    \           \:::\    \      \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m     /:::/__\:::\    \           \:::\    \        /:::/__\:::\    \        /:::/__\:::\    \           \:::\    \     \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m     \:::\   \:::\    \          /::::\    \      /::::\   \:::\    \      /::::\   \:::\    \          /::::\    \    \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m   ___\:::\   \:::\    \        /::::::\    \    /::::::\   \:::\    \    /::::::\   \:::\    \        /::::::\    \   \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m  /\   \:::\   \:::\    \      /:::/\:::\    \  /:::/\:::\   \:::\    \  /:::/\:::\   \:::\____\      /:::/\:::\    \  \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m /::\   \:::\   \:::\____\    /:::/  \:::\____\/:::/  \:::\   \:::\____\/:::/  \:::\   \:::|    |    /:::/  \:::\____\ \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m \:::\   \:::\   \::/    /   /:::/    \::/    /\::/    \:::\  /:::/    /\::/   |::::\  /:::|____|   /:::/    \::/    / \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m  \:::\   \:::\   \/____/   /:::/    / \/____/  \/____/ \:::\/:::/    /  \/____|:::::\/:::/    /   /:::/    / \/____/  \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m   \:::\   \:::\    \      /:::/    /                    \::::::/    /         |:::::::::/    /   /:::/    /           \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m    \:::\   \:::\____\    /:::/    /                      \::::/    /          |::|\::::/    /   /:::/    /            \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m     \:::\  /:::/    /    \::/    /                       /:::/    /           |::| \::/____/    \::/    /             \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m      \:::\/:::/    /      \/____/                       /:::/    /            |::|  ~|           \/____/              \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m       \::::::/    /                                    /:::/    /             |::|   |                                \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m        \::::/    /                                    /:::/    /              \::|   |                                \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m         \::/    /                                     \::/    /                \:|   |                                \033[0m"; sleep 0.02
echo -e "\033[48;5;235;38;2;0;191;255m          \/____/                                       \/____/                  \|___|                                \033[0m"; sleep 0.2

# èŽ·å–å½“å‰ç›®å½•è·¯å¾„
current_path=$(pwd)

# èŽ·å–ä¸Šä¸€çº§ç›®å½•çš„è·¯å¾„
parent_dir=$(dirname "$current_path")

# èŽ·å–ä¸Šä¸€çº§ç›®å½•ä¸­çš„ bin ç›®å½•è·¯å¾„
bin_dir="$parent_dir/bin"

# æ£€æŸ¥ bin ç›®å½•æ˜¯å¦å­˜åœ¨
if [ ! -d "$bin_dir" ]; then
    echo "ä¸Šä¸€çº§ç›®å½•ä¸­ä¸å­˜åœ¨ bin ç›®å½•ã€‚"
    exit 1
fi

# èŽ·å– bin ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨
files=("$bin_dir"/*)

# æ£€æŸ¥ bin ç›®å½•æ˜¯å¦ä¸ºç©º
if [ ${#files[@]} -eq 0 ]; then
    echo "bin ç›®å½•ä¸­æ²¡æœ‰æ–‡ä»¶ã€‚"
    exit 1
fi

###################

BLUE='\033[1;34m'    # è“è‰²ç”¨äºŽæ–‡ä»¶å
YELLOW='\033[1;33m'  # é»„è‰²ç”¨äºŽåºå·
NC='\033[0m'         # æ¸…é™¤é¢œè‰²

echo -e "è¯·é€‰æ‹©è¦æ‰§è¡Œçš„æ–‡ä»¶:"
for i in "${!files[@]}"; do
    file="${files[$i]##*/}"  # åªèŽ·å–æ–‡ä»¶å
    echo -e "${YELLOW}$((i + 1))${NC}) ${BLUE}$file${NC}"
done


while true; do
    read -p "è¯·è¾“å…¥åºå·: " choice
    
    # æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—ï¼Œå¹¶åœ¨èŒƒå›´å†…
    if [[ "$choice" =~ ^[0-9]+$ ]] && (( choice >= 1 && choice <= ${#files[@]} )); then
        file="${files[choice-1]}"
        
        # æ£€æŸ¥æ˜¯å¦ä¸ºå¯æ‰§è¡Œæ–‡ä»¶
        if [[ -x "$file" ]]; then
            echo -e "\033[48;5;235;38;2;0;191;255m ðŸš€ æ­£åœ¨æ‰§è¡Œ ${BLUE}${file##*/}${NC}... \033[0m"
            "$file"
        else
            echo -e "${BLUE}${file##*/}${NC} ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ˜¯å¦å°è¯•ç”¨ bash æ‰§è¡Œï¼Ÿ(y/n)"
            read -r run_with_bash
            if [[ "$run_with_bash" == "y" ]]; then
                bash "$file"
            else
                echo "å–æ¶ˆæ‰§è¡Œ ${BLUE}${file##*/}${NC}ã€‚"
            fi
        fi
        break
    else
        echo "æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°é€‰æ‹©ã€‚"
    fi
done
